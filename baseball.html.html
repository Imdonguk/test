<html>
<head>
	<title>테스트</title>
</head>
<body>
<h2>숫자야구게임</h2>
<h3>0~9까지의 세자리 숫자를 입력해주세요</h3>
<input type = "text" id = "number"/>
<input type = "button" id = "btn" value = "추가!"/>
<div id = "div">
	
</div>


<script type="text/javascript">

//난수생성 함수!

var random = function (){
	var result = Math.floor(Math.random()*10);
	return result;
}
var ran = [];
ran[0] = random();
while(true){
	ran[1] = random();
	if(ran[0] !== ran[1]){
		break;
	}
}
while(true){
	ran[2] = random();
	if(ran[0] !== ran[2] && ran[1] !== ran[2]){
		break;
	}
}
document.write(ran[0] + "<br>" + ran[1] + "<br>" + ran[2] + "<br>");

//게임플레이 함수!
var aa = function (){
	var result = asd();
	var strike = 0;
	var ball = 0;
	if(result){
		
	}else{
		var num = document.getElementById("number").value;
		var num_int = parseInt(num);
		var num_array = [];
		num_array[0] = Math.floor(num_int/100);
		num_array[1] = Math.floor(num_int%100/10);
		num_array[2] = Math.floor(num_int%100%10);
		for(var n = 0; n<3; n++){
			if(ran[n] === num_array[n]){
				strike++;
			}
			for(var m = 0; m<3; m++){
				if(n!==m && ran[n] === num_array[m]){
					ball++;
				}
			}
		}
		if(strike === 3){
			location.reload();
			alert("3개의 숫자를 모두 맞히셨습니다! 게임 종료");

		}else{
			var d = document.getElementById("div");
			var p = document.createElement("p");
			var br = document.createElement("br");
			var text = document.createTextNode("숫자를 입력해주세요! ex)123 : " + num);
			var game_text = document.createTextNode(strike+"스트라이크!!"+ball+"볼!!");

			p.appendChild(text);
			p.appendChild(br);
			p.appendChild(game_text);
			d.appendChild(p);
		}
	}
}



//입력값 숫자 세자리 숫자 제대로 입력하게 하는 함수!
var asd = function (){
	
	var num = document.getElementById("number").value;
	var num_int = parseInt(num);
	var num_array = [];
	num_array[0] = Math.floor(num_int/100);
	num_array[1] = Math.floor(num_int%100/10);
	num_array[2] = Math.floor(num_int%100%10);

	var result = true;
	if(isNaN(num_int)){
		alert("문자말고 숫자를 입력해주세요.");
	}else if(num === null){
		alert("세자리 숫자를 입력해주세요");
	}else if(num_array[0] !== 0 && (num>1000 || num < 100)){
		alert("세자리 숫자를 입력해주세요");
	}else if(num_array[0] === num_array[1] || num_array[0] === num_array[2] || num_array[1] === num_array[2]){
		alert("중복되지 않는 세자리 숫자를 입력해주세요.");
	}
	else{
		result = false;
	}

	return result;
}

//버튼 이벤트발동!!
var btn = document.getElementById("btn");

btn.addEventListener("click", aa);

</script>
</body>
</html>